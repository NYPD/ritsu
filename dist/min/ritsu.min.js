/* ritsu.js v0.1.1 
 * Created 2016-09-30
 * Licensed under the MIT license
 * Source code can be found here: https://github.com/NYPD/ritsu 
 */

var rules=function(){var a=function(){return/(^\d{5}([\s-]?\d{4})?$)|(^[ABCEGHJKLMNPRSTVXY]{1}\d{1}[A-Z]{1} ?\d{1}[A-Z]{1}\d{1}$)/},b=function(){return/^([A-Za-z\s\.\-])+$/},c=function(){return/^([a-zA-Z0-9]+)$/},d=function(){return/^(\S+@\S+\.\S+)$/},e=function(){return/^[-]?(([\d]{1,3}(,{1}[\d]{3})*)|[\d]+)$/},f=function(){return/^((-?[\d]{1,3}(,[\d]{3})*(\.[\d]{2})*)|-?[\d]+(\.[\d]{2})?)$/},g=function(a){var b=void 0===a;b&&(a=2);var c="^((([\\d]{1,3}(,[\\d]{3})*)?(\\.[\\d]{1,decimalPlaces})?)|[\\d]*(\\.[\\d]{1,decimalPlaces})?)$",d=new RegExp(c.replace(/decimalPlaces/g,a));return d},h=function(){return/^(\d{4})$/},i=function(){return/^(\d{2}\/\d{2}\/\d{4})$/};return{getAlphaZipRegex:a,getAlphaOnlyRegex:b,getAlphaEmailRegex:d,getAlphaNumericRegex:c,getNumericWholeRegex:e,getNumericMonetaryRegex:f,getNumericDecimalRegexString:g,getNumericFullYearRegex:h,getNumericDatePickerRegex:i}}(),validation=function(){var a=function(a){var d=$(a),e=!0,f=d.prop("disabled")===!0;if(f)return e;var g=d.is("input, textarea"),h=d.is("select");return g&&(e=b(a)),h&&(e=c(a)),e},b=function(a){var b=$(a),c=!0,f=b.hasClass("alpha"),g=b.hasClass("numeric"),h=b.hasClass("optional"),i=b.val(),j=""===$.trim(i)||void 0===i,k=j&&h;return k?c:(f&&(c=d(a)),g&&(c=e(a)),c)},c=function(a){var b=$(a),c=b.val(),d=b.hasClass("optional"),e=""===$.trim(c)||void 0===c,f=d&&e||!e;return f},d=function(a){var b=$(a),c=!1,d=b.val(),e=(b.hasClass("alpha-all"),b.hasClass("alpha-only")),f=b.hasClass("alpha-zip"),g=b.hasClass("alpha-jquery-date"),h=b.hasClass("alpha-numeric"),i=b.hasClass("alpha-email");return e?c=rules.getAlphaOnlyRegex().test(d):f?c=rules.getAlphaZipRegex().test(d):g?c=null!==b.datepicker("getDate"):h?c=rules.getAlphaNumericRegex().test(d):i&&(c=rules.getAlphaEmailRegex().test(d)),c},e=function(a){var b=$(a),c=!1,d=b.val(),e=b.hasClass("numeric-whole"),f=b.hasClass("numeric-monetary"),g=b.hasClass("numeric-decimal"),h=b.hasClass("numeric-full-year"),i=b.hasClass("numeric-date-picker");if(e)c=rules.getNumericWholeRegex().test(d);else if(f)c=rules.getNumericMonetaryRegex().test(d);else if(g)c=rules.getNumericDecimalRegexString(b.data("decimal-max")).test(d);else if(h)c=rules.getNumericFullYearRegex().test(d);else if(i){c=rules.getNumericDatePickerRegex().test(d);var j=a.hasAttribute("data-no-past-date");if(j&&c){var k=new Date,l=new Date(k.getFullYear(),k.getMonth(),k.getDate());c=b.datepicker("getDate").getTime()>=l.getTime()}}if(c){var m=(Number(d.replace(",","")),""===$.trim(b.attr("min"))?null:Number(b.attr("min"))),n=""===$.trim(b.attr("max"))?null:Number(b.attr("max")),o=null!==m,p=null!==n;o&&p?c=d>=m||d<=n:o?c=d>=m:p&&(c=d<=n)}return c};return{validateElement:a}}();if("undefined"==typeof jQuery||"undefined"==typeof $)throw new Error("ritsu.js requires jQuery or a jQuery-compatible API");var ritsu=function(){var a=!1,b=!0,c=!1,d=function(d){var e="object"!=typeof d;if(e)throw"Invalid options to initialize ritsu.js";return a=void 0!==d.useBootstrap3Stlying&&d.useBootstrap3Stlying,b=void 0===d.autoMarkInvalidFields||d.autoMarkInvalidFields,c=void 0!==d.autoShowErrorMessages&&d.autoShowErrorMessages,this},e=function(a){var b=void 0===a;b&&(a=$("input, textarea, select"));var c=!a.is("input, textarea, select");return c&&(a=a.find("input, textarea, select")),a.each(function(){var a=$(this),b=a.is('input[type="checkbox"]'),c=a.is('input[type="radio"]'),d=a.is('input[type="file"]');if(b||c)a.data("initialValue",a.is(":checked"));else if(d){var e=void 0!==a.data("simple-file-hash");if(e)return a.data("initialValue",a.data("simple-file-hash")),!0;var f=this.files.length>0,g=f?this.files[0].name+this.files[0].size+this.files[0].lastModified:"";a.data("initialValue",g)}else a.data("initialValue",a.val())}),this},f=function(a){var b=!1,c=void 0===a;c&&(a=$("input, textarea, select"));var d=!a.is("input, textarea, select");return d&&(a=a.find("input, textarea, select")),a.each(function(){var a=$(this),c=void 0===a.data("initialValue");if(c)return!0;var d=a.is('input[type="checkbox"]'),e=a.is('input[type="radio"]'),f=a.is('input[type="file"]'),g=!1;if(d||e)g=a.data("initialValue")!=a.is(":checked");else if(f){var h=this.files.length>0;g=a.data("initialValue")!=(h?this.files[0].name+this.files[0].size+this.files[0].lastModified:a.data("simple-file-hash"))}else g=a.data("initialValue")!=a.val();return g?(b=!0,!1):void 0}),b},g=function(a){var d=void 0===a;d&&(a=$("input, textarea, select"));var e=!a.is("input, textarea, select");e&&(a=a.find("input, textarea, select"));var f=!0;return a.each(function(){var a=$(this),b=!validation.validateElement(this);b?(f=!1,a.data("invalid",!0)):(a.data("invalid",!1),j(a))}),b&&h(a),c&&i(a),f},h=function(b){var c=void 0===b;c&&(b=$("input, textarea, select"));var d=!b.is("input, textarea, select");return d&&(b=b.find("input, textarea, select")),b.each(function(){var b=$(this),c=a?b.closest(".form-group"):b,d=b.data("invalid");d?c.addClass("has-error"):c.removeClass("has-error")}),this},i=function(b){var c=void 0===b;c&&(b=$("input, textarea, select"));var d=!b.is("input, textarea, select");return d&&(b=b.find("input, textarea, select")),b.each(function(){var b=$(this);j(b);var c=!b.data("invalid");if(c)return!0;var d=k(b);if(a){var e=b.closest(".form-group");e.append('<span class="help-block">'+d+"</span>")}else{var f=b.attr("id"),g=0===b.closest(".error-label-container").length?b.parent():b.closest(".error-label-container");g.append('<label class="error-label"'+(f?' for="'+f+'"':"")+">"+d+"</label>")}}),this},j=function(b){if(b.closest("td").find(".error-label").remove(),a)return void b.closest(".form-group").find(".help-block").remove();var c=b.closest(".error-label-container");0===c.length&&(c=b.parent()),c.find(".error-label, .warning-label").remove()},k=function(a){var b=a.hasClass("alpha");if(b){var c=a.hasClass("alpha-all");if(c)return null;var d=a.hasClass("alpha-only");if(d)return"Please enter only letters";var e=a.hasClass("alpha-zip");if(e)return"Please enter a valid zip code";var f=a.hasClass("alpha-jquery-date");if(f)return"Please select a date from the datepicker";var g=a.hasClass("alpha-numeric");if(g)return"Please enter only alphanumeric characters"}var h=a.hasClass("numeric");if(h){var i,j=a.hasClass("numeric-whole");j&&(i="Please enter a whole number");var k=a.hasClass("numeric-monetary");k&&(i="Please enter a monetary value");var l=a.hasClass("numeric-decimal");l&&(i="Please enter a number");var m=a.hasClass("numeric-full-year");m&&(i="Please enter a 4 digit year");var n=void 0!==a.attr("min"),o=void 0!==a.attr("max"),p=void 0!==a.data("decimal-max");return p&&(i+=" with "+a.data("decimal-max")+" decimal places max"),n&&o?i=i+" from "+a.attr("min")+" to "+a.attr("max"):n?i=i+" greater or equal to "+a.attr("min"):o&&(i=i+" lesser or equal to "+a.attr("max")),i+="."}return"Invalid Value"};return{initialize:d,storeInitialFormValues:e,isFormDirty:f,validate:g,markInvalidFields:h,showErrorMessages:i}}();
