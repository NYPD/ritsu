/* ritsu.js v1.5.0 
 * Created 2019-09-04
 * Licensed under the MIT license
 * Source code can be found here: https://github.com/NYPD/ritsu 
 */

var ritsu = (function() {
var rules=function(){function u(e){if(!Array.isArray(e))return void 0===o[e]?null:o[e];var t=null;return e.some(function(e){return void 0!==o[e]&&(t=o[e],!0)}),t}function s(e,t,r,a){this.ruleType=e,this.ruleClass=t,this.validate=r,this.getErrorMessage=a}var o=[],l=function(e,t,r,a){if("alpha"!==e&&"numeric"!==e)throw new Error('The rule type for a new validation rule must be either "alpha" or "numeric"');if("string"!=typeof t)throw new Error("The rule class for a new validation rule is missing or is not of type string");if("function"!=typeof r)throw new Error("The validation function for a new validation rule is missing or is not of type function");if(void 0===a&&(a=function(){return"Invalid value"}),"string"==typeof a){var i=a;a=function(){return i}}var n=u(t);if(null!==n){var l=o.indexOf(n);o.splice(l,1)}o[t]=new s(e,t,r,a)};return l("alpha","alpha-only",function(e){var t=e.value,r=e.hasAttribute("data-no-space");return new RegExp("^([A-Za-z@.-])+$".replace(/@/g,r?"":"\\s")).test(t)},"Only letters, spaces, hypens, and periods are allowed"),l("alpha","alpha-zip",function(e){return/(^\d{5}([\s-]?\d{4})?$)|(^[ABCEGHJKLMNPRSTVXY]{1}\d{1}[A-Z]{1} ?\d{1}[A-Z]{1}\d{1}$)/.test(e.value)},"Enter a valid zip code"),l("alpha","alpha-numeric",function(e){var t=e.value,r=e.hasAttribute("data-no-space");return new RegExp("^([a-zA-Z0-9@]+)$".replace(/@/g,r?"":"\\s")).test(t)},"Enter only alphanumeric characters"),l("alpha","alpha-email",function(e){return/^(\S+@\S+\.\S+)$/.test(e.value)},"Make sure the email is correct"),l("numeric","numeric-whole",function(e){var t=e.value,r=e.hasAttribute("data-no-thousands-separator"),a=/^-?(([\d]{1,3}(,{1}[\d]{3})*)|[\d]+)$/.test(t);return r&&(a=a&&-1===t.indexOf(",")),a},function(e){var t="Enter a whole number",r=e.hasAttribute("min"),a=e.hasAttribute("max");return r&&a?t=t+" from "+e.getAttribute("min")+" to "+e.getAttribute("max"):r?t=t+" greater or equal to "+e.getAttribute("min"):a&&(t=t+" lesser or equal to "+e.getAttribute("max")),t}),l("numeric","numeric-decimal",function(e){var t=e.value,r=e.hasAttribute("data-no-thousands-separator"),a=e.getAttribute("data-decimal-max");null===a&&(a=2);var i=new RegExp("^-?((([\\d]{1,3}(,[\\d]{3})*)+(\\.[\\d]{1,decimalPlaces})?)|[\\d]+(\\.[\\d]{1,decimalPlaces})?)$".replace(/decimalPlaces/g,a)).test(t);return r&&(i=i&&-1===t.indexOf(",")),i},function(e){var t="Please enter a number",r=e.hasAttribute("min"),a=e.hasAttribute("max");return t+=" with "+(e.hasAttribute("data-decimal-max")?e.getAttribute("data-decimal-max"):2)+" decimal places max",r&&a?t=t+" and from "+e.getAttribute("min")+" to "+e.getAttribute("max"):r?t=t+" and greater or equal to "+e.getAttribute("min"):a&&(t=t+" and lesser or equal to "+e.getAttribute("max")),t}),l("numeric","numeric-full-year",function(e){return console.warn("numeric-full-year has been deprecated since v1.3.0. Use numeric-whole instead and specify a min/max on the element"),/^(\d{4})$/.test(e.value)},function(e){var t="Please enter a 4 digit year",r=e.hasAttribute("min"),a=e.hasAttribute("max");return r&&a?t=t+" from "+e.getAttribute("min")+" to "+e.getAttribute("max"):r?t=t+" greater or equal to "+e.getAttribute("min"):a&&(t=t+" lesser or equal to "+e.getAttribute("max")),t}),l("numeric","numeric-jquery-date",function(e){return null!==$(e).datepicker("getDate")},"Please select a date from the date picker"),{getRuleByRuleClass:u,addValidationRule:function(e,t,r,a){var i=Array.isArray(e),n="object"==typeof e&&!i;i||n?(n&&(e=[e]),e.forEach(function(e){l(e.ruleType,e.ruleClass,e.validationFunction,e.errorMessage)})):l(e,t,r,a)}}},validation=function(p){var i=function(e){var t=!0;if("hidden"===e.type)return t;var r,a=e.classList.contains("alpha"),i=e.classList.contains("numeric"),n="file"===e.type,l=e.hasAttribute("required"),u=e.value,s=void 0===u||""===u.trim(),o=e.getAttribute("pattern");if(null===o)return(!s||l||n)&&(a&&(t=d(e)),i&&(t=f(e)),n&&(t=c(e)),a||i||n||!l||(t=!s)),t;if(s&&!l)return t;try{r=new RegExp(o,"u")}catch(e){r=new RegExp(o)}return r.test(u)},n=function(e){var t=-1===e.selectedIndex?void 0:e.options[e.selectedIndex].value,r=e.hasAttribute("required"),a=void 0===t||""===t.trim();return a&&!r||!a},c=function(e){var t=!0;if(!e.hasAttribute("required"))return t;var r=e.getAttribute("data-simple-file-hash"),a=!(null!==r&&""!==r.trim());return 0===e.files.length&&a&&(t=!1),t},d=function(e){var t=!0,r=e.hasAttribute("required"),a=e.getAttribute("class").split(" "),i=p.getRuleByRuleClass(a);return null!==i||r?null===i&&r?(console.warn('No ritsu rule found for the "alpha" input, add the appropriate alpha validation rule'),!1):t=i.validate(e):t},f=function(e){var t=!0,r=e.hasAttribute("required"),a=e.getAttribute("class"),i=a?a.split(" "):"",n=p.getRuleByRuleClass(i);if(null===n&&!r)return t;if(null===n&&r)return console.warn('No ritsu rule found for the "numeric" input, add the appropriate alpha validation rule'),!1;if(t=n.validate(e)){var l=Number(e.value.replace(",",""));if(Number.isNaN(l))return t;var u=e.getAttribute("min"),s=e.getAttribute("max"),o=""===u||null===u?null:Number(u),c=""===s||null===s?null:Number(s),d=null!==o,f=null!==c;d&&f?t=o<=l&&l<=c:d?t=o<=l:f&&(t=l<=c)}return t};return{validateElement:function(e){var t=!0;if(!0===e.disabled)return t;var r=-1<["INPUT","TEXTAREA"].indexOf(e.nodeName),a="SELECT"===e.nodeName;return r&&(t=i(e)),a&&(t=n(e)),t}}},core=function(n,l){function e(e){return u(e).reduce(function(e,t){return t.hasAttribute("data-initial-value")&&e.push(t),e},[]).forEach(function(e){var t="checkbox"===e.type,r="radio"===e.type,a="file"===e.type,i=e.getAttribute("data-initial-value");if(t||r)e.checked="true"==i;else if(a){var n=e.cloneNode(!0);n.removeAttribute("data-initial-value"),n.removeAttribute("data-simple-file-hash"),e.parentNode.replaceChild(n,e)}else e.value=i}),this}function t(e){return u(e).forEach(function(e){var t="true"===e.getAttribute("data-invalid"),r=p.useBootstrap4Stlying,a=p.useBootstrap3Stlying?v(e,"form-group"):e;null===a&&(a=e);var i=p.useBootstrap4Stlying?"is-invalid":"has-error",n=e.nextElementSibling,l=null!=n;t?(a.classList.add(i),r&&l&&n.classList.add("invalid-feedback")):(a.classList.remove(i),r&&l&&n.classList.remove("invalid-feedback"))}),this}function r(e,a){var t=u(e),i=void 0!==a;return t.reduce(function(e,t){var r="true"===t.getAttribute("data-invalid");return null!==p.messageCallback||i?o(t,i?a:p.messageCallback,r):s(t),r&&e.push(t),e},[]).forEach(function(e){var t=m(e),r=v(e,"form-group");if((p.useBootstrap3Stlying||p.useBootstrap4Stlying)&&null!=r)if(p.useBootstrap4Stlying){var a=document.createElement("small");a.innerHTML=t,a.className="ritsu-error invalid-feedback",r.insertBefore(a,e.nextSibling)}else{var i=r.querySelector(".help-block"),n=null!==i,l=document.createElement("em");l.innerHTML=t;var u=document.createElement("b");if(n){var s=document.createElement("br");s.className="ritsu-error",u.className="ritsu-error",u.appendChild(l),u.appendChild(s),i.insertBefore(u,i.firstChild)}else{u.appendChild(l);var o=document.createElement("span");o.className="ritsu-error help-block",o.appendChild(u),e.parentElement.appendChild(o)}}else{var c=e.getAttribute("id"),d=document.createElement("label");d.className="error-label ritsu-error",d.htmlFor=c||"",d.innerHTML=t;var f=v(e,"form-group");(null===f?e.parentElement:f).appendChild(d)}}),this}var a="undefined"!=typeof jQuery,p={useBootstrap:!1,useBootstrap3Stlying:!1,useBootstrap4Stlying:!1,autoMarkInvalidFields:!0,autoShowErrorMessages:!1,messageCallback:null},i=function(e){var t=u(e),r=[];return t.forEach(function(e){"true"===e.getAttribute("data-invalid")&&r.push(m(e))}),r},u=function(e){if(a&&e instanceof jQuery&&(e=e.get()),void 0===e&&(e=Array.prototype.slice.call(document.querySelectorAll("input, textarea, select"))),"string"==typeof e&&(e=Array.prototype.slice.call(document.querySelectorAll(e))),(e instanceof NodeList||e instanceof HTMLCollection)&&(e=Array.prototype.slice.call(e)),Array.isArray(e)||(e=[e]),0===e.length)return[];var t=[];return e.forEach(function(e){-1===["INPUT","TEXTAREA","SELECT"].indexOf(e.nodeName)?t=t.concat(Array.prototype.slice.call(e.querySelectorAll("input, textarea, select"))):t.push(e)}),t},v=function(e,t,r){for(;e;){var a=e.parentElement;if(null!==a&&0!==a.classList.length){if(Array.from(a.classList).some(function(e){return r?e.includes(t):e===t}))return a;e=a}else e=a}return null},s=function(e){var t=v(e,"form-group");if(null===t&&(t=e.parentElement),null!==t){var r=p.useBootstrap?".ritsu-error":".error-label, .warning-label";Array.prototype.slice.call(t.querySelectorAll(r)).forEach(function(e){e.parentElement.removeChild(e)})}},o=function(e,t,r){t(e,r?m(e):null)},c=function(e){p.autoMarkInvalidFields&&t(e),p.autoShowErrorMessages&&r(e)},m=function(e){if("SELECT"===e.nodeName)return"Please select an option";if(e.hasAttribute("data-error-message"))return e.getAttribute("data-error-message");var t="Invalid Value",r=e.getAttribute("class");if(null===r||""===r)return t;var a=r.split(" "),i=n.getRuleByRuleClass(a);return null!==i&&(t=i.getErrorMessage(e)),t};return{version:"1.5.0",rules:n,initialize:function(e){if("object"!=typeof e)throw new Error("Invalid options to initialize ritsu.js");if(p.useBootstrap3Stlying=void 0!==e.useBootstrap3Stlying&&e.useBootstrap3Stlying,p.useBootstrap4Stlying=void 0!==e.useBootstrap4Stlying&&e.useBootstrap4Stlying,p.autoMarkInvalidFields=void 0===e.autoMarkInvalidFields||e.autoMarkInvalidFields,p.autoShowErrorMessages=void 0!==e.autoShowErrorMessages&&e.autoShowErrorMessages,p.useBootstrap=p.useBootstrap3Stlying||p.useBootstrap4Stlying,void 0===e.messageCallback)p.messageCallback=null;else{if("function"!=typeof e.messageCallback)throw new Error("messageCallback is not a function");p.messageCallback=e.messageCallback}var t=e.validationRules;return void 0!==t&&n.addValidationRule(t),this},storeInitialFormValues:function(e){return u(e).forEach(function(e){var t="checkbox"===e.type,r="radio"===e.type,a="file"===e.type;if(t||r)e.setAttribute("data-initial-value",e.checked);else if(a){if(void 0!==e.getAttribute("data-simple-file-hash"))return e.setAttribute("data-initial-value",e.getAttribute("data-simple-file-hash")),!0;var i=0<e.files.length?e.files[0].name+e.files[0].size:void 0;e.setAttribute("data-initial-value",i)}else e.setAttribute("data-initial-value",e.value)}),this},getInitialFormValue:function(e){var t=u(e);return 0===t.length?null:t[0].getAttribute("data-initial-value")},resetIntialFormValues:e,resetInitialFormValues:e,isFormDirty:function(e){var l=!1;return u(e).forEach(function(e){if(void 0===e.getAttribute("data-initial-value"))return!0;var t="checkbox"===e.type,r="radio"===e.type,a="file"===e.type,i=!1,n=e.getAttribute("data-initial-value");if(t||r)i=n!=String(e.checked);else if(a){i=n!==(0<e.files.length?e.files[0].name+e.files[0].size:e.getAttribute("data-simple-file-hash"))}else i=n!==e.value;return i?!(l=!0):void 0}),l},validate:function(e,r){var a=void 0!==r,t=u(e),i=!0;return t.forEach(function(e){var t=!l.validateElement(e);null===p.messageCallback&&!a||o(e,a?r:p.messageCallback,t),t?(i=!1,e.setAttribute("data-invalid",!0)):(e.setAttribute("data-invalid",!1),null!==p.messageCallback||a||s(e))}),null!==p.messageCallback||a||c(t),i},markInvalidFields:t,showErrorMessages:r,getErrorMessage:function(e){if(void 0===e)throw new Error("No selector passed in");var t=i(e);return void 0===t[0]?null:t[0]},getErrorMessages:i,getErrorMessagesAsMap:function(e){console.warn("getErrorMessagesAsMap has been deprecated since v1.4.0. Use getErrorMessagesAsObjects instead.");var t=u(e),r={};return t.forEach(function(e){"true"===e.getAttribute("data-invalid")&&(r[e]=m(e))}),r},getErrorMessagesAsObjects:function(e){return u(e).reduce(function(e,t){return"true"===t.getAttribute("data-invalid")&&e.push({input:t,errorMessage:m(t)}),e},[])}}};
//# sourceMappingURL=ritsu.min.js.map
var r = rules(); return core(r, validation(r));
})();